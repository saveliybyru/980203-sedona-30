const opener=document.querySelector(".search-button"),popup=document.querySelector(".search-hotel-popup"),form=popup.querySelector("form"),arrival=popup.querySelector("[name=arrival-date]"),departure=popup.querySelector("[name=departure-date]"),adult=popup.querySelector("[name=adult-guest]"),children=popup.querySelector("[name=children-guest]");let isStorageSupport=!0;try{adultStorage=localStorage.getItem("adult"),childrenStorage=localStorage.getItem("children")}catch(e){isStorageSupport=!1}opener.addEventListener("click",function(e){e.preventDefault(),popup.classList.toggle("close-popup"),popup.classList.toggle("show-popup"),popup.classList.remove("error-popup"),arrival.focus(),adultStorage&&childrenStorage&&(adult.value=adultStorage,children.value=childrenStorage)}),form.addEventListener("submit",function(e){arrival.value&&departure.value&&adult.value&&children.value?isStorageSupport&&(localStorage.setItem("adult",adult.value),localStorage.setItem("children",children.value)):(e.preventDefault(),popup.classList.add("error-popup"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(popup.classList.contains("close-popup")||(e.preventDefault(),popup.classList.remove("show-popup"),popup.classList.add("close-popup"),popup.classList.remove("error-popup")))});
